---
import { Image } from "astro:assets";
import lb from "../assets/R.png";
import rb from "../assets/rb.png";
import profile from "../assets/profile.jpg";
import Separator from "./Separator.astro";
import HeaderNav from "./svelte/HeaderNav.svelte";

const path = Astro.url.pathname;
const redNeonBorder =
  "relative  after:content-[''] after:rounded-xs after:hidden lg:after:block after:absolute after:left-0 after:bottom-1 after:w-full after:h-[4px] after:bg-[#D43458] after:[box-shadow:0_0_10px_#D43458,0_0_20px_#D43458]";
---

<header>
  <nav class="border-gray-200 px-4 lg:px-8 pt-8 lg:pt-10">
    <h1
      class="hidden lg:block self-center tracking-wide text-3xl mb-3 whitespace-nowrap"
    >
      Main Menu
    </h1>
    <span
      id="header-home-info"
      class="text-gray-800 opacity-80 dark:text-white font-medium text-base px-4 lg:px-8 py-2 lg:py-2.5 mr-2 fixed top-8 right-8 lg:top-10 lg:right-12 bg-gray-700 focus:outline-none"
      >Hector Robayo</span
    >
    <div class="flex flex-wrap items-center max-w-screen-md">
      <Image
        src={lb}
        loading={"lazy"}
        alt={"left border"}
        class="hidden lg:block w-9 mr-3"
      />
      <Separator size={6} additionalClass="hidden lg: mb-[-6px]" />
      <a href="/" class:list={["px-4", path === "/" ? redNeonBorder : ""]}>
        <Image
          class:list={[
            "mt-3 mx-auto w-8 hover:opacity-100 sm:w-7 mb-2 ",
            path === "/" ? "opacity-100" : "opacity-50",
          ]}
          loading={"lazy"}
          src={profile}
          alt={"profile"}
        />
      </a>
      <Separator size={6} additionalClass="hidden lg:block mb-[-6px]" />
      <HeaderNav
        path={path}
        redNeonBorder={redNeonBorder}
        client:only="svelte"
      />

      <Image
        src={rb}
        alt={"right border"}
        loading={"lazy"}
        class="hidden lg:block w-9 ml-3"
      />
    </div>
  </nav>
</header>

<script>
  // function changeHeader(path: string) {
  //   const pathName = path.split("/")[1];
  //   const headerHomeInfo = document.getElementById("header-home-info");
  //   headerHomeInfo && (headerHomeInfo.textContent = pathName || "About me");
  // }
  // window.addEventListener("popstate", () =>
  //   changeHeader(window.location.pathname)
  // );
  // window.addEventListener("pushstate", () =>
  //   changeHeader(window.location.pathname)
  // );
</script>
